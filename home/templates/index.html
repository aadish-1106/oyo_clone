{% extends "utils/base.html" %}

{% block start %}
<div class="container mt-5">
    <div class="row">
        {% for hotel in hotels %}
        <div class="col-md-4 mb-4">
            <div class="card shadow h-100">
                {% if hotel.hotel_images.first %}
                <img src="/media/{{ hotel.hotel_images.first.image }}" class="card-img-top" alt="{{ hotel.hotel_name }}"
                    style="height: 200px; object-fit: cover;">
                {% else %}
                <img src="https://via.placeholder.com/300x200?text=No+Image" class="card-img-top" alt="No Image"
                    style="height: 200px; object-fit: cover;">
                {% endif %}

                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">{{ hotel.hotel_name }}</h5>
                    <p class="card-text text-truncate">{{ hotel.hotel_description|truncatechars:100 }}</p>
                    <p class="card-text">
                        <span class="badge bg-danger">{{ hotel.hotel_location }}</span>
                    </p>
                    <div class="mb-2">
                        {% for amenity in hotel.amenities.all|slice:":3" %}
                        <span class="badge bg-secondary">{{ amenity.name }}</span>
                        {% endfor %}
                        {% if hotel.amenities.all.count > 3 %}
                        <span class="badge bg-light text-dark">+{{ hotel.amenities.all.count|add:"-3" }} more</span>
                        {% endif %}
                    </div>

                    <h5 class="mt-auto text-danger">${{ hotel.hotel_offer_price }} <small
                            class="text-muted text-decoration-line-through">${{ hotel.hotel_price }}</small></h5>

                    <a href="{% url 'hotel_detail' hotel.hotel_slug %}" class="btn btn-primary mt-2">View Deal</a>
                </div>
            </div>
        </div>
        {% empty %}
        <div class="col-12">
            <div class="alert alert-info text-center">
                <h3>No hotels available at the moment.</h3>
                <p>Please check back later or log in as a vendor to add hotels.</p>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}